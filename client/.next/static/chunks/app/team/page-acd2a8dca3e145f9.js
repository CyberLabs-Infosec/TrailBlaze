(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[599],{8707:function(e,t,a){Promise.resolve().then(a.bind(a,2300))},2300:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var s=a(7437),n=a(2265),l=a(1490),o=a(171),i=a(4033),r=a(9309),c=a(4546);function d(){let e="outline-none rounded-md px-3 py-3 shadow-2xl shadow-slate-950 text-slate-400 bg-transparent",[t,a]=(0,n.useState)({username:null,phone:null,teamname:null}),[d,u]=(0,n.useState)(!1),[m,h]=(0,n.useState)({}),x=(0,i.useRouter)(),[f,p]=(0,n.useState)([[128,100],[300,300],[432,400],[765,450]]),[g,v]=(0,n.useState)([{value:5,name:"Solved (5)"},{value:15,name:"Unsolved\n(15)"}]),[b,j]=(0,n.useState)(null);(0,n.useEffect)(()=>{var e=document.getElementById("chart"),t=document.getElementById("solved");if(e){let t=c.S1(e,"dark");t.setOption({title:{},tooltip:{},xAxis:{},yAxis:{},series:[{name:"Score",type:"line",data:f}]})}if(t){let e=c.S1(t,"dark");e.setOption({title:{text:"Team progress",left:"center",top:"center"},series:[{type:"pie",emphasis:{label:{show:!0,fontSize:"15",fontWeight:"bold"}},data:g,radius:["50%","70%"]}]})}},[d]);let w=async()=>{let e=document.getElementById("teamname").value,t=document.getElementById("secret").value,a=await o.Am.promise(fetch("/api/user/createteam",{method:"POST",headers:{Authorization:"Bearer ".concat(l.Z.get("token")),"Content-Type":"application/json"},body:JSON.stringify({teamname:e,secret:t})}),{pending:"Creating team..."}),s=await a.json();"fail"==s.status?o.Am.error(s.error):(o.Am.success("Congrats, you started a team!"),location.reload())},y=async()=>{let e=document.getElementById("teamname").value,t=document.getElementById("secret").value,a=await o.Am.promise(fetch("/api/user/jointeam",{method:"POST",headers:{Authorization:"Bearer ".concat(l.Z.get("token")),"Content-Type":"application/json"},body:JSON.stringify({teamname:e,secret:t})}),{pending:"Joining team..."}),s=await a.json();"fail"==s.status?o.Am.error(s.error):(o.Am.success("Congrats, you joined a team!"),location.reload())},N=async()=>{let e=await o.Am.promise(fetch("/api/user/leaveteam",{headers:{Authorization:"Bearer ".concat(l.Z.get("token"))}}),{pending:"Leaving team..."}),t=await e.json();"fail"==t.status?o.Am.error(t.error):("info"==t.status?o.Am.info(t.info):o.Am.success("You left the team"),location.reload())};return(0,n.useEffect)(()=>{let e=async()=>{let e=await fetch("/api/user/verify",{headers:{Authorization:"Bearer ".concat(l.Z.get("token"))}}),t=await e.json();"success"==t.status?(a(t.data),u(!0)):x.push("/login")};e()},[]),(0,n.useEffect)(()=>{let e=async()=>{let e=await fetch("/api/user/teaminfo",{headers:{Authorization:"Bearer ".concat(l.Z.get("token"))}}),t=await e.json();"success"==t.status&&(h(t.data),j(t.captain_id))};d&&e()},[d]),d?null==t.teamname?(0,s.jsxs)("div",{className:"flex absolute justify-center items-center w-full h-full min-h-full bg-slate-900 gap-10",children:[(0,s.jsx)("div",{className:"h-96 w-96 bg-cover rounded-xl z-10",children:(0,s.jsx)("div",{className:"w-full h-full bg-planets bg-s bg-cover bg-center rounded-md"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsx)("p",{className:"text-center text-3xl font-bold text-slate-400",children:"JOIN / CREATE TEAM"}),(0,s.jsx)("hr",{className:"border-slate-500"}),(0,s.jsx)("input",{className:e,id:"teamname",name:"teamname",placeholder:"Team Name"}),(0,s.jsx)("input",{className:e,id:"secret",name:"secret",placeholder:"Team Secret",type:"password"}),(0,s.jsxs)("div",{className:"flex justify-center gap-3 w-full",children:[(0,s.jsx)("button",{onClick:y,className:"bg-violet-600 text-white p-3 w-1/2 rounded-md shadow-lg shadow-violet-500/50 grow",children:"Join"}),(0,s.jsx)("button",{onClick:w,className:"bg-violet-600 text-white p-3 w-1/2 rounded-md shadow-lg shadow-violet-500/50 grow",children:"Create"})]})]})]}):(0,s.jsx)("div",{className:"flex absolute justify-center items-center w-full h-full min-h-full bg-slate-900",children:(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsx)("p",{className:"text-slate-400 text-4xl font-bold",children:t.teamname}),(0,s.jsx)("div",{className:"flex gap-3 mt-4",children:Object.keys(m).map(e=>(0,s.jsxs)("div",{className:"text-slate-300 px-3 py-2 bg-slate-800 rounded-md",children:[b==m[e].id?(0,s.jsx)("div",{className:"absolute -translate-y-7 -translate-x-4 w-8 h-8 bg-captain bg-contain bg-center bg-no-repeat rounded-full"}):(0,s.jsx)(s.Fragment,{}),m[e].username]},e))}),(0,s.jsxs)("div",{className:"flex gap-5",children:[(0,s.jsx)("div",{id:"chart",className:"bg-slate-800 rounded-lg",style:{height:"400px",width:"800px"}}),(0,s.jsx)("div",{id:"solved",className:"bg-slate-800 rounded-lg",style:{height:"400px",width:"400px"}})]}),(0,s.jsx)("button",{onClick:N,className:"bg-violet-600 text-white p-2 w-32 rounded-md shadow-md shadow-violet-500/50 grow",children:"Leave Team"})]})}):(0,s.jsx)("div",{className:"text-center text-3xl font-bold text-slate-400",children:(0,s.jsx)(r.Z,{})})}},9309:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(7437);function n(){return(0,s.jsxs)("div",{className:"absolute flex flex-col top-0 end-0 z-50 h-screen w-screen bg-slate-800 justify-center items-center",children:[(0,s.jsx)("p",{className:"text-slate-400 text-5xl font-Gruppo",children:"TRAILBLAZE"}),(0,s.jsx)("div",{className:"bg-loading bg-cover bg-center w-80 h-14"})]})}a(2265)}},function(e){e.O(0,[99,971,596,744],function(){return e(e.s=8707)}),_N_E=e.O()}]);